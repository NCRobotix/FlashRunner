<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flash Runner Game</title>
    <link rel="stylesheet" href="index.CSS">

  </head>
  <body>
    <div><img id="player" src="Media/Players/RedPlayer.jpg" width="30" height="30"></div>
    <div id="red" width="20" height="20"></div>
    <div id="settings" class="setting-button"><img src="Media/Players/YellowPlayer.jpg" width="30" height="30"></div>
    <div id="block" width="30" height="30"></div>
    <canvas id="gameCanvas" width="800" height="922"></canvas>
    <script>
        var stage = 0;
        
        var p1x = 400;
        var p1y = 750;
        var pWidth = 30;
        var pHeight = 90;
        var width = 200;
        var height = 200;

        //counters
        var fps = 60;
        var score = 0;
        var lives = 1;
        var timer = 0;
        var timeLimit = 60;
        var splashTime;
        var gameTime;
        
        //multimedia
        var red;
        var yellow = new Image(30, 30);
        yellow.src = 'Media/Players/YellowPlayer.jpg';
        var crashSound = new Audio('Media/Sound/sound.wav');
      window.onload = function draw() {
        preload();
        //var setbut = document.getElementbyId("settings");
        var canvas = document.getElementById("gameCanvas");
        var ca = canvas.getContext("2d");
        console.log(ca);
        red.src = 'Media/Players/RedPlayer.jpg';
        splash();
        window.addEventListener('keydown', (e) => {
          if (e.code === "Space" & stage == 0) {
              game();
              stage = 1;
              selectScreen();
          }
        });
        //setbut.addEventListener('click', settings()
       // );
        function screenSelect(){
          if(stage === 0){
            splash();
          }
          if(stage === 1){
            game();
          }
          if(stage === 2){
            loseScreen();
          }
          if(stage === 3){
            settings();
          }
        }
        function splash(){
            //document.canvas.style.background = #FFFFFF;
            //ca.image(landscape, width/2, height/2, width, height);
            ca.clearRect(0, 0, canvas.width, canvas.height);
            ca.font = "50px Arial";
            ca.fillText("FLASH RUNNER", 80, 150);
            ca.font = "40px Arial";
            ca.fillText("BY NC", 80, 200);
        
            ca.font = "20px Arial";
            ca.fillText("DIRECTIONS", 80, 250);
            ca.fillText("DODGE THE OBSTACLES BY MOVING WITH THE RIGHT AND LEFT KEYS", width/2, 300);
            ca.fillText("BY NC", 80, 350);
          }

        function game(){
          ca.clearRect(0, 0, canvas.width, canvas.height);
          //while(var r = 0){
            keyPressed();
            red.onload = function playred(){
              ca.drawImage(red, p1x, p1y, pWidth, pHeight);
            }
          //}
          requestAnimationFrame(game());
          document.addEventListiner("keyDown", keyPressed());
        }
        
        function loseScreen(){
          crashSound.play();
          //image(landscape, 80, height/2, width, height);
          ca.clearRect(0, 0, canvas.width, canvas.height);
          ca.font = "50px Arial";
          ca.fillText("You died...", 240, 300);
          ca.font = "20px Arial";
          ca.fillText("SCORE: " + score, 320, 350);
          ca.font = "20px Arial";
          ca.fillText("Press SPACE to restart", 240, 450);
        }

        function settings(){
          ca.clearRect(0, 0, canvas.width, canvas.height);
          //ca.fillRect(100, 100, 100, 100);
          ca.font = "50px Arial";
          ca.fillText("MUSIC", 80, 250);
        }
        
        function credits(){
          ca.font = "40px Arial";
          ca.fillText("Blue Scorpion", 80, 150);
          ca.fillText("Kevin MacLeod (incompetech.com)", 80, 200);
          ca.fillText("Licensed under Creative Commons: By Attribution 3.0", 80, 250);
          ca.fillText("http://creativecommons.org/licenses/by/3.0/", 80, 300);
        }

        function playerPos(){
          ca.drawImage(red, p1x, p1y);
        }
        function keyPressed(e){
            if(e.code === '37'){
              p1x = p1x - 5;
            }
            else if(e.code === '39'){
              p1x = p1x + 5;
            }
          }
        
        function preload(){
          red = loadImage('Media/Players/RedPlayer.jpg');
          //platform = loadImage('Media/Players/RedPlayer.jpg');
          //landscape = loadImage('Media/Players/GreenPlayer.jpg');
          //theme = loadSound('Media/Sound/sound.wav');
        }
       }

//box;
var b1x = 200;
var b1y = 300;
var bWidth = 30;
var bHeight = 70;
var b1position = 0;
var bSpeed = 2;
var bDirection = -1;
var bDistance = 100;

var direction = 1;
var velocity = 2;
var fallingSpeed = 2;

//multimedia
var landscape;
var platform;
var crashSound;
var theme;
      
    </script>
  </body>
</html>
